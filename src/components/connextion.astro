<script type="module">
    import PocketBase from "/node_modules/pocketbase/dist/pocketbase.es.mjs";

    const pb = new PocketBase(
        "https://pocketbaseprojets2.mouilleseaux-lhuillier-pierre.fr",
    );

    const token = localStorage.getItem("pb_token");
    if (token) pb.authStore.save(token, null);

    if (!pb.authStore.isValid) {
        window.location.href = "/connexion";
    } else {
        const user = pb.authStore.model;
        document.querySelector("#userEmail").textContent =
            user?.email ?? "Inconnu";
    }
</script>
